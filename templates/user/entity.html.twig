{% extends 'base.html.twig' %}

{% block title %}{{ app.user.username }} {{ parent() }}{% endblock %}

{% block breadcrumbs %}
	{{ parent() }}  
{% endblock %}

{% block main %}
    {{ parent() }}

<div class="border-bottom py-2 mb-3 d-flex justify-content-between align-items-end">
    <h4 class="m-0">Les meves entitats</h4>
    
        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#modalInfoEntity" data-bs-toggle="tooltip" data-bs-placement="top" title="Informació">
                <svg xmlns="http://www.w3.org/2000/svg" class="ionicon" viewBox="0 0 512 512">
                    <title>Help Circle</title>
                    <path d="M256 80a176 176 0 10176 176A176 176 0 00256 80z" fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="32"/><path d="M200 202.29s.84-17.5 19.57-32.57C230.68 160.77 244 158.18 256 158c10.93-.14 20.69 1.67 26.53 4.45 10 4.76 29.47 16.38 29.47 41.09 0 26-17 37.81-36.37 50.8S251 281.43 251 296" fill="none" stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="28"/>
                    <circle cx="250" cy="348" r="20"/>
                </svg>
        </button>

</div>
    <div class="d-flex gap-4 entities my-5">
        {% for userEntity in userEntities %}
            {% set entity = userEntity.getEntity %}
            {% set roles = userEntity.getRoles %}


                <a href={{ path('user_choose_entity', {'id' : entity.id}) }}>
                    <div class="card" style="width: 19rem;">
                        <div>
                            <img src="{{ asset(entity.picture ? path('entity_picture', {'picture': entity.picture}) : path('entity_picture', {'picture': 'default.png'})) }}" style="object-fit:contain;max-height:350px;width:100%;" alt="Imagen de {{entity.name}}" title="Imagen de {{entity.name}}">
                        </div>
                        <div class="card-body">
                            <h5 class="card-title">{{entity.name}}</h5>
                            <ul class="card-list ps-3">
                                {% for role in roles %}
                                    {% if role == "ROLE_EDITOR" %}
                                        <li class="d-flex align-items-center gap-1 list-unstyled">
                                            <div class="fav-apps__app-icon doc-outline">
                                                <svg xmlns="http://www.w3.org/2000/svg" class="ionicon" viewBox="0 0 512 512">
                                                <title>Create</title>
                                                <path d="M384 224v184a40 40 0 01-40 40H104a40 40 0 01-40-40V168a40 40 0 0140-40h167.48" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"/><path d="M459.94 53.25a16.06 16.06 0 00-23.22-.56L424.35 65a8 8 0 000 11.31l11.34 11.32a8 8 0 0011.34 0l12.06-12c6.1-6.09 6.67-16.01.85-22.38zM399.34 90L218.82 270.2a9 9 0 00-2.31 3.93L208.16 299a3.91 3.91 0 004.86 4.86l24.85-8.35a9 9 0 003.93-2.31L422 112.66a9 9 0 000-12.66l-9.95-10a9 9 0 00-12.71 0z"/></svg>
                                            </div>
                                            Editor
                                        </li>
                                    {% endif %}

                                    {% if role == "ROLE_PRESCRIPTOR" %}
                                        <li class="d-flex align-items-center gap-1 list-unstyled">
                                            <div class="fav-apps__app-icon doc-outline">
                                                <svg xmlns="http://www.w3.org/2000/svg" class="ionicon" viewBox="0 0 512 512">
                                                <title>Clipboard</title>
                                                <path d="M336 64h32a48 48 0 0148 48v320a48 48 0 01-48 48H144a48 48 0 01-48-48V112a48 48 0 0148-48h32" fill="none" stroke="currentColor" stroke-linejoin="round" stroke-width="32"/><rect x="176" y="32" width="160" height="64" rx="26.13" ry="26.13" fill="none" stroke="currentColor" stroke-linejoin="round" stroke-width="32"/></svg>
                                            </div>
                                            Prescriptor
                                        </li>
                                    {% endif %}

                                    {% if role == "ROLE_ADMIN_ENTITY" %}
                                    <li class="d-flex align-items-center gap-1 list-unstyled">
                                            <div class="fav-apps__app-icon doc-outline">
                                                <svg xmlns="http://www.w3.org/2000/svg" class="ionicon" viewBox="0 0 512 512">
                                                <title>Diamond</title>
                                                <path d="M35.42 188.21l207.75 269.46a16.17 16.17 0 0025.66 0l207.75-269.46a16.52 16.52 0 00.95-18.75L407.06 55.71A16.22 16.22 0 00393.27 48H118.73a16.22 16.22 0 00-13.79 7.71L34.47 169.46a16.52 16.52 0 00.95 18.75zM48 176h416" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"/><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M400 64l-48 112-96-128M112 64l48 112 96-128M256 448l-96-272M256 448l96-272"/></svg>
                                            </div>
                                            Administrador
                                        </li>
                                    {% endif %}
                                {% endfor %}
                            </ul>
                        </div>
                    </div>  
                </a>

        {% endfor %}
    </div>

    <div>

    <!-- Modal -->
<div class="modal fade" id="modalInfoEntity" tabindex="-1" role="dialog" aria-labelledby="modalInfoEntity" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLongTitle">Llegenda de rols</h5>
                <button type="button" class="btn-close" data-dismiss="modal" aria-label="Close"></button>            
            </div>
            <div class="modal-body">
                <ul class="my-3 ps-2">
                    <li class="my-3 list-unstyled">
                        <b class="d-flex align-items-center gap-1">
                            <div class="fav-apps__app-icon doc-outline">
                                <svg xmlns="http://www.w3.org/2000/svg" class="ionicon" viewBox="0 0 512 512">
                                <title>Create</title>
                                <path d="M384 224v184a40 40 0 01-40 40H104a40 40 0 01-40-40V168a40 40 0 0140-40h167.48" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"/><path d="M459.94 53.25a16.06 16.06 0 00-23.22-.56L424.35 65a8 8 0 000 11.31l11.34 11.32a8 8 0 0011.34 0l12.06-12c6.1-6.09 6.67-16.01.85-22.38zM399.34 90L218.82 270.2a9 9 0 00-2.31 3.93L208.16 299a3.91 3.91 0 004.86 4.86l24.85-8.35a9 9 0 003.93-2.31L422 112.66a9 9 0 000-12.66l-9.95-10a9 9 0 00-12.71 0z"/></svg>
                            </div>
                            Editor
                        </b>
                        <ul class="ps-5">
                            <li class="my-2"><span>Crear, eliminar, modificar una activitat</span></li>
                            <li class="my-2"><span>Mostrar o ocultar una activitat als perfils prescriptors</span></li>
                            <li class="my-2"><span>Gestió de la llista d'espera</span></li>
                            <li class="my-2"><span>Activació d'un tiquet ja generat</span></li>
                            <li class="my-2"><span>Veure llista de participants d'una activitat</span></li>
                        </ul>
                    </li>
                    <li class="my-4 list-unstyled">
                        <b class="d-flex align-items-center gap-1">
                            <div class="fav-apps__app-icon doc-outline">
                                <svg xmlns="http://www.w3.org/2000/svg" class="ionicon" viewBox="0 0 512 512">
                                <title>Clipboard</title>
                                <path d="M336 64h32a48 48 0 0148 48v320a48 48 0 01-48 48H144a48 48 0 01-48-48V112a48 48 0 0148-48h32" fill="none" stroke="currentColor" stroke-linejoin="round" stroke-width="32"/><rect x="176" y="32" width="160" height="64" rx="26.13" ry="26.13" fill="none" stroke="currentColor" stroke-linejoin="round" stroke-width="32"/></svg>
                            </div>
                            Prescriptor
                        </b>
                        <ul class="ps-5">
                            <li class="my-2"><span>Veure totes les activitats no ocultes de tots els equipaments</span></li>
                            <li class="my-2"><span>Inscriure un participant a una activitat</span></li>
                            <li class="my-2"><span>Generar un PDF amb les dades dels tiquets existents</span></li>
                            <li class="my-2"><span>Mostrar participants i historials</span></li>
                        </ul>
                    </li>
                    <li class="my-4 list-unstyled">
                        <b class="d-flex align-items-center gap-1">
                            <div class="fav-apps__app-icon doc-outline">
                                <svg xmlns="http://www.w3.org/2000/svg" class="ionicon" viewBox="0 0 512 512">
                                <title>Diamond</title>
                                <path d="M35.42 188.21l207.75 269.46a16.17 16.17 0 0025.66 0l207.75-269.46a16.52 16.52 0 00.95-18.75L407.06 55.71A16.22 16.22 0 00393.27 48H118.73a16.22 16.22 0 00-13.79 7.71L34.47 169.46a16.52 16.52 0 00.95 18.75zM48 176h416" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"/><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M400 64l-48 112-96-128M112 64l48 112 96-128M256 448l-96-272M256 448l96-272"/></svg>
                            </div>
                            Administrador
                        </b>
                        <ul class="ps-5">
                            <li class="my-2"><span>Creació d'usuaris dintre de l'entitat</span></li>
                            <li class="my-2"><span>Gestió de rols dintre de l'entitat</span></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>



{% endblock %}